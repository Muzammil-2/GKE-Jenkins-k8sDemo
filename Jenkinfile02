pipeline {

agent  any

environment {
   Registry = 'quadrimuzammil'
   App = 'Java25'
   tag = 'BUILD_NUMBER'
   BUILD_NUMBER = 'buildNumber'
   SCANNER_HOME = tool 'sonar-tool'
}
tools {
  maven 'maven'
}
stages{
stage ('CheckoutCodes') {
    steps{
git credentialsId: 'Github_Id', url: 'https://github.com/Muzammil-2/GKE-Jenkins-k8sDemo'
}
}
stage ('Code_Analysis') {
    steps{
withSonarQubeEnv('sonar') {
    sh ''' $SCANNER_HOME/bin/sonar-tool -Dsonar.projectName=GKE-Project \
                            -Dsonar.projectKey=GKE-Project '''
}
}
}
stage ('Code_Quality') {
    steps{
     timeout(time: 1, unit: 'HOURS') {
    waitForQualityGate abortPipeline: false, credentialsId: 'sonarid'
}
}
}




}
}
/*
stage ('Docker_Image') {
    steps{
     script{
          docker build -t $Registry/$App:$tag .

     }
}
stage ('DockerImage_Push') {
    steps{
     script{
          docker login -u 
          docker push $Registry/$App:$tag 

     }
}





}



*/
